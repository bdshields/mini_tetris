# Schematic

## LED Matrix


|     |    | Col | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 |
|-----|----|-----|---|---|---|---|---|---|---|---|
|     |    | Pin | 13| 3 | 4 | 10| 6 | 11| 15| 16|
| Row | Pin|     |   |   |   |   |   |   |   |   |
|  1  |  9 |     |   |   |   |   |   |   |   |   |
|  2  | 14 |     |   |   |   |   |   |   |   |   |
|  3  |  8 |     |   |   |   |   |   |   |   |   |
|  4  | 12 |     |   |   |   |   |   |   |   |   |
|  5  |  1 |     |   |   |   |   |   |   |   |   |
|  6  |  7 |     |   |   |   |   |   |   |   |   |
|  7  |  2 |     |   |   |   |   |   |   |   |   |
|  8  |  5 |     |   |   |   |   |   |   |   |   |

## Connections

```
      r1  r2  r3  r4  r5  r6  r7  r8  
                                         50 ohms            
  c1   # - # - # - # - # - # - # - #  ----\/\/\/---C1--\
       |   |   |   |   |   |   |   |                   I   
  c2   # - # - # - # - # - # - # - #  ----\/\/\/-------I      
       |   |   |   |   |   |   |   |                   I      
  c3   # - # - # - # - # - # - # - #  ----\/\/\/-------I      
       |   |   |   |   |   |   |   |                   I      
  c4   # - # - # - # - # - # - # - #  ----\/\/\/-------I      
       |   |   |   |   |   |   |   |                   I      
  c5   # - # - # - # - # - # - # - #  ----\/\/\/-------I      
       |   |   |   |   |   |   |   |                   I      
  c6   # - # - # - # - # - # - # - #  ----\/\/\/-------I      
       |   |   |   |   |   |   |   |                   I      
  c7   # - # - # - # - # - # - # - #  ----\/\/\/-------I      
       |   |   |   |   |   |   |   |                   I     
  c8   # - # - # - # - # - # - # - #  ----\/\/\/---C8--\\       C1 - C16
       |   |   |   |   |   |   |   |                     ==========\\====   GPIO1.0 ... GPIO2.7
  c9   # - # - # - # - # - # - # - #  ----\/\/\/---C9--//   
       |   |   |   |   |   |   |   |                   I    .======\\====   GPIO4.0 ... GPIO4.7  (TIMERB) 
 c10   # - # - # - # - # - # - # - #  ----\/\/\/-------I   //    R1 - R8
       |   |   |   |   |   |   |   |                   I   I
 c11   # - # - # - # - # - # - # - #  ----\/\/\/-------I   I
       |   |   |   |   |   |   |   |                   I   I
 c12   # - # - # - # - # - # - # - #  ----\/\/\/-------I   I
       |   |   |   |   |   |   |   |                   I   I
 c13   # - # - # - # - # - # - # - #  ----\/\/\/-------I   I          C  --:>|---\/\/\/--- R
       |   |   |   |   |   |   |   |                   I   I
 c14   # - # - # - # - # - # - # - #  ----\/\/\/-------I   I
       |   |   |   |   |   |   |   |                   I   I
 c15   # - # - # - # - # - # - # - #  ----\/\/\/-------I   I
       |   |   |   |   |   |   |   |                   I   I
 c16   # - # - # - # - # - # - # - #  ----\/\/\/---C16-/   I
       |   |   |   |   |   |   |   |                       I
       |   |   |   |   |   |   |   |                       I
       |   |   |   |   |   |   |   |                       I
       |   |   |   |   |   |   |   '-------------- R8 -----I
       |   |   |   |   |   |   |                           I
       |   |   |   |   |   |   '------------------ R7 -----I
       |   |   |   |   |   |                               I
       |   |   |   |   |   '---------------------- R6 -----I
       |   |   |   |   |                                   I
       |   |   |   |   '-------------------------- R5 -----I
       |   |   |   |                                       I
       |   |   |   '------------------------------ R4 -----I
       |   |   |                                           I
       |   |   '---------------------------------- R3 -----I
       |   |                                               I
       |   '-------------------------------------- R2 -----I
       |                                                   I
       '------------------------------------------ R1 -----/
      

```

# Display Refresh

A Row of display data is loaded onto GPIO Ports 1 and 2.
The Columns are driven LOW to illuminate the LED

## Timer B Usage

 * Timer runs in Continuous Up Mode
 * Output units are used to control the ROWs

## Timer B Interrupts


| Row | FLG       | ISR                                  | HW action   |
|------|----------|--------------------------------------|-------------|
|   1  |  TBIFG   | SET R8,  CLR R1                      | CCR0 SET R1 |
|   2  |  CCR0IFG | CLR R2                               | CCR1 SET R2 |
|   3  |  CCR1IFG | CLR R3                               | CCR2 SET R3 |
|   4  |  CCR2IFG | CLR R4                               | CCR3 SET R4 |
|   5  |  CCR3IFG | CLR R5                               | CCR4 SET R5 |
|   6  |  CCR4IFG | CLR R6                               | CCR5 SET R6 |
|   7  |  CCR5IFG | CLR R7                               | CCR6 SET R7 |
|   8  |  CCR6IFG | CLR R8, Advance TMR to near rollover | NA |



    















